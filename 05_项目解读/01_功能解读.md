# XiaZheStudy 功能解读

这是一个 AI 驱动的学习平台，核心功能是：上传文档或输入文字 → AI 自动生成动画讲解。

---

## 项目定位

**一句话介绍：** 让复杂的知识像动画一样生动。

**解决什么问题：**
- 看文档太枯燥，看不进去
- 知识点复杂，难以理解
- 想要更直观的学习方式

**怎么解决：**
- 上传文档（PDF/Word/PPT）
- AI 分析内容，生成动画脚本
- 输出可交互的动画讲解

---

## 核心功能模块

### 1. 用户系统

| 功能 | 说明 |
|------|------|
| 注册登录 | 支持邮箱注册 + Google OAuth |
| 用户中心 | 查看个人信息、订阅状态、积分余额 |
| 订阅套餐 | free / basic / plus / pro 四档 |
| 积分系统 | 新用户送 500 积分，用于生成动画 |
| 邀请系统 | 邀请好友注册，双方都得积分奖励 |

### 2. 文档管理

| 功能 | 说明 |
|------|------|
| 上传文档 | 支持 PDF、Word、PPT 等格式 |
| 文档解析 | 后端自动提取文档文本内容 |
| 文档列表 | 查看、删除已上传的文档 |
| 存储管理 | 文件存储在 Supabase Storage |

### 3. 课程/动画生成（核心功能）

这是整个产品的核心：

```
用户输入（文档/文字）
    ↓
AI 分析内容
    ↓
生成动画脚本（HTML + GSAP）
    ↓
实时流式输出
    ↓
用户预览动画
    ↓
保存为课程
```

**支持的输入方式：**
- 上传文档 → 解析文本 → 生成动画
- 直接输入文字 → 生成动画

**生成选项：**
- 风格：标准、幽默、学术、科幻等
- 难度：简单、中等、困难

**状态流转：**
```
pending（排队中）→ processing（生成中）→ completed（完成）
                                    ↘ failed（失败）
```

### 4. 课程广场（Fun Square）

| 功能 | 说明 |
|------|------|
| 公开课程 | 用户可以把自己的课程设为公开 |
| 浏览发现 | 查看其他用户分享的优质动画 |
| 点赞收藏 | 给喜欢的课程点赞 |
| 播放统计 | 记录播放次数 |

### 5. 导出功能

| 功能 | 说明 |
|------|------|
| 导出视频 | 把动画导出为 MP4 视频文件 |
| 导出图片 | 导出为图片序列 |
| 任务队列 | 导出是异步任务，后台处理 |

### 6. 站内信系统

| 功能 | 说明 |
|------|------|
| 系统通知 | 积分变动、订阅到期等通知 |
| 消息列表 | 查看历史消息 |
| 已读未读 | 标记消息状态 |

---

## 用户使用流程

### 流程一：文档生成动画

```
1. 用户注册/登录
2. 进入「我的文档」页面
3. 上传一个 PDF 文件
4. 点击「生成动画」
5. 选择风格和难度
6. 等待 AI 生成（流式输出，实时可见）
7. 预览生成的动画
8. 保存到「我的课程」
9. （可选）设为公开，分享到广场
```

### 流程二：文字生成动画

```
1. 进入「创作课程」页面
2. 直接输入主题或内容
3. 选择风格和难度
4. AI 实时生成动画
5. 预览、保存、分享
```

### 流程三：邀请好友

```
1. 进入「邀请好友」页面
2. 复制自己的邀请链接
3. 分享给朋友
4. 朋友通过链接注册
5. 双方各得积分奖励
```

---

## 技术栈概览

| 层级 | 技术 |
|------|------|
| 前端 | Next.js 14 + Tailwind CSS + shadcn/ui |
| 后端 | FastAPI + SQLAlchemy |
| 数据库 | PostgreSQL (Supabase) |
| 存储 | Supabase Storage |
| 认证 | Supabase Auth (支持 Google OAuth) |
| AI | 大语言模型 API（流式输出） |
| 部署 | Vercel (前端) + Railway (后端) |
| 域名 | Cloudflare |

---

## 数据模型概览

```
User（用户）
 ├── Documents（文档）
 ├── Courses（课程/动画）
 ├── Posts（广场帖子）
 ├── Wallet（钱包/积分）
 ├── CreditTransactions（积分记录）
 ├── Invitations（邀请记录）
 └── Messages（站内信）

Course（课程）
 ├── status: pending/processing/completed/failed
 ├── content: JSON（动画内容）
 ├── style: 风格
 ├── difficulty: 难度
 └── is_public: 是否公开

Document（文档）
 ├── file_url: 存储地址
 ├── file_type: 文件类型
 └── file_size: 文件大小
```

---

## 商业模式

| 套餐 | 价格 | 权益 |
|------|------|------|
| Free | 免费 | 500 积分，基础功能 |
| Basic | ¥xx/月 | 更多积分，更多存储 |
| Plus | ¥xx/月 | 高级功能，优先生成 |
| Pro | ¥xx/月 | 无限制，API 访问 |

**积分消耗：**
- 生成一个动画消耗 xx 积分
- 导出视频消耗 xx 积分

**获取积分：**
- 新用户注册送 500 积分
- 邀请好友各得 xx 积分
- 充值购买

---

## 小结

XiaZheStudy 是一个典型的 AI 内容生成平台：

1. **输入** → 文档/文字
2. **处理** → AI 分析 + 动画生成
3. **输出** → 可交互的动画讲解
4. **社交** → 分享到广场，点赞互动
5. **变现** → 订阅 + 积分

技术上是标准的全栈架构，适合学习参考。
