# ğŸ¨ ä» 0 åˆ° 1 ä¸Šçº¿ AI å›¾ç‰‡ç«™å®æˆ˜æ•™ç¨‹ (å°ç™½ä¸“ç”¨)

> **å†™åœ¨å‰é¢**:
> è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜é¡¹ç›®æ•™ç¨‹,æ•™ä½ å¦‚ä½•ç”¨ **Vercel + Cloudflare R2 + Supabase** ç™½å«–æ–¹æ¡ˆ,ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªå¯ä»¥å¯¹å¤–è®¿é—®ã€å¯è¢«æœç´¢å¼•æ“æ”¶å½•çš„ AI å›¾ç‰‡ç«™ã€‚æ€»æˆæœ¬åªéœ€è¦åŸŸåè´¹ç”¨(çº¦ $10-17/å¹´),å…¶ä»–å…¨éƒ¨å…è´¹!

**æ¡ˆä¾‹é¡¹ç›®**: Pet Emoji Generator (å® ç‰©è¡¨æƒ…åŒ…ç”Ÿæˆå™¨)
- åŠŸèƒ½: ä¸Šä¼ å® ç‰©ç…§ç‰‡ â†’ AI ç”Ÿæˆ 9 å®«æ ¼è¡¨æƒ…åŒ…
- æˆæœ¬: $17/å¹´ (ä»…åŸŸåè´¹ç”¨)
- ç”¨æ—¶: åŠå¤© ~ 1 å¤©
- è®¿é—®: [www.petemojimaker.com](https://www.petemojimaker.com)

---

## ğŸ“Œ é‡è¦! ç†è§£æŠ€æœ¯æ–¹æ¡ˆå’Œæˆæœ¬ (å°ç™½å¿…è¯»)

### å®Œæ•´æŠ€æœ¯æ ˆ

| æœåŠ¡ | ç”¨é€” | è·å–ä½ç½® | è´¹ç”¨ | æ˜¯å¦å¿…éœ€? |
|-----|------|---------|------|---------|
| **Namecheap** | åŸŸåè´­ä¹° | [namecheap.com](https://www.namecheap.com/) | $10-17/å¹´ | âœ… å¿…éœ€ |
| **Vercel** | ç½‘ç«™éƒ¨ç½² | [vercel.com](https://vercel.com) | å…è´¹ | âœ… å¿…éœ€ |
| **Cloudflare R2** | å›¾ç‰‡å­˜å‚¨ | [cloudflare.com](https://cloudflare.com) | å…è´¹ 10GB | âœ… å¿…éœ€ |
| **Supabase** | æ•°æ®åº“ | [supabase.com](https://supabase.com) | å…è´¹ 500MB | âœ… å¿…éœ€ |
| **GitHub** | ä»£ç æ‰˜ç®¡ | [github.com](https://github.com) | å…è´¹ | âœ… å¿…éœ€ |
| **Cursor** | AI ç¼–ç¨‹å·¥å…· | [cursor.sh](https://cursor.sh) | å…è´¹/ä»˜è´¹ | âš ï¸ å¯é€‰ |

> **å°ç™½å¿…è¯»**:
> - âŒ é”™è¯¯: æ‰€æœ‰é…ç½®éƒ½åœ¨ Vercel å®Œæˆ
> - âœ… æ­£ç¡®: åŸŸååœ¨ Namecheap è´­ä¹°,å›¾ç‰‡å­˜ R2,æ•°æ®å­˜ Supabase,ç½‘ç«™éƒ¨ç½²åˆ° Vercel
> - æ€»æˆæœ¬ = åŸŸåè´¹ç”¨($10-17/å¹´) + å…¶ä»–å…¨å…è´¹!

---

## ğŸ—ï¸ ä¸€ã€æ¶æ„æ€»è§ˆ

### 1.1 å®Œæ•´é“¾è·¯å›¾

```
ç”¨æˆ·è®¿é—®
    â†“
è‡ªå®šä¹‰åŸŸå (example.com)
    â†“
Vercel (Next.js SSR/é™æ€é¡µé¢)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚                  â”‚
Cloudflare R2     Supabase          AI API
(å›¾ç‰‡å­˜å‚¨)        (æ•°æ®åº“)          (å›¾ç‰‡ç”Ÿæˆ)
â”‚                 â”‚                  â”‚
img.example.com   ç”Ÿæˆè®°å½•/ç‚¹èµ      ComfyUI/Replicate
```

### 1.2 æŠ€æœ¯æ–¹æ¡ˆè¯´æ˜

**å‰ç«¯**:
- Next.js æä¾›é™æ€/SSR é¡µé¢
- Tailwind CSS æ ·å¼
- React ç»„ä»¶

**åç«¯**:
- Vercel Serverless Functions (Next.js API Routes)
- Supabase æ•°æ®åº“ (PostgreSQL)

**å­˜å‚¨**:
- Cloudflare R2 å­˜å‚¨å›¾ç‰‡ (S3 å…¼å®¹)
- è‡ªå®šä¹‰åŸŸåè®¿é—® (å¦‚ `img.example.com`)

**éƒ¨ç½²**:
- GitHub ä»£ç æ‰˜ç®¡
- Vercel è‡ªåŠ¨éƒ¨ç½²
- å…¨çƒ CDN åŠ é€Ÿ

---

## ğŸš€ äºŒã€å®Œæ•´å¼€å‘æµç¨‹ (5 å¤§æ­¥éª¤)

### æµç¨‹æ€»è§ˆ

```
Step 1: è´­ä¹°åŸŸå (Namecheap)
    â†“
Step 2: å¼€å‘é¡¹ç›® (Next.js + Cursor)
    â†“
Step 3: éƒ¨ç½²åˆ° Vercel + ç»‘å®šåŸŸå
    â†“
Step 4: é…ç½® Cloudflare R2 å›¾ç‰‡å­˜å‚¨
    â†“
Step 5: é…ç½® Supabase æ•°æ®åº“ + SEO ä¼˜åŒ–
```

---

## ğŸ“¦ Step 1: è´­ä¹°åŸŸå (Namecheap)

### 1.1 ä¸ºä»€ä¹ˆè¦ä¹°åŸŸå?

**Vercel é»˜è®¤åŸŸå vs è‡ªå®šä¹‰åŸŸå**:

| å¯¹æ¯”é¡¹ | Vercel é»˜è®¤åŸŸå | è‡ªå®šä¹‰åŸŸå |
|-------|---------------|-----------|
| æ ¼å¼ | `your-app.vercel.app` | `example.com` |
| è´¹ç”¨ | å…è´¹ | $10-17/å¹´ |
| ä¸“ä¸šåº¦ | â­â­ | â­â­â­â­â­ |
| SEO æ”¶å½• | ä¸€èˆ¬ | å¥½ |
| å¯ä¿¡åº¦ | ä½ | é«˜ |

### 1.2 æ¨èåŸŸåæ³¨å†Œå•†

| æ³¨å†Œå•† | ä¼˜ç‚¹ | ä»·æ ¼ | æ¨èæŒ‡æ•° |
|-------|------|------|---------|
| **Namecheap** | ä¾¿å®œ,é¢æ¿ç®€å•,é€éšç§ä¿æŠ¤ | $8-12/å¹´ | â­â­â­â­â­ |
| **Cloudflare** | æˆæœ¬ä»·,æ— åŠ ä»· | $9/å¹´ | â­â­â­â­ |
| **é˜¿é‡Œäº‘** | ä¸­æ–‡ç•Œé¢,æ”¯ä»˜å® | Â¥55/å¹´ | â­â­â­ |

### 1.3 è´­ä¹°æ­¥éª¤ (ä»¥ Namecheap ä¸ºä¾‹)

```
ç¬¬1æ­¥: è®¿é—® Namecheap.com
    â†“
ç¬¬2æ­¥: æœç´¢åŸŸå (å¦‚ petemojimaker.com)
    â†“
ç¬¬3æ­¥: åŠ å…¥è´­ç‰©è½¦ â†’ ç»“è´¦
    â†“
ç¬¬4æ­¥: å®Œæˆæ”¯ä»˜
    â†“
ç¬¬5æ­¥: åŸŸåæ˜¾ç¤ºåœ¨ Domain List
```

**åŸŸåé€‰æ‹©å»ºè®®**:
- âœ… ç®€çŸ­æ˜“è®° (å¦‚ `petmaker.com`)
- âœ… ä¼˜å…ˆ `.com` / `.io` / `.app`
- âœ… é¿å…æ•°å­—å’Œè¿å­—ç¬¦
- âœ… ä¸äº§å“åŠŸèƒ½ç›¸å…³

---

## ğŸ’» Step 2: å¼€å‘é¡¹ç›® (Next.js + Cursor)

### 2.1 æŠ€æœ¯æ ˆ

```bash
# å‰ç«¯æ¡†æ¶
Next.js 14 (App Router)
React 18
Tailwind CSS
TypeScript

# å›¾ç‰‡å¤„ç†
Sharp (å‹ç¼©)
Next/Image (ä¼˜åŒ–)

# AI é›†æˆ
ComfyUI / Replicate API
```

### 2.2 é¡¹ç›®åˆå§‹åŒ–

```bash
# åˆ›å»º Next.js é¡¹ç›®
npx create-next-app@latest pet-emoji-generator

# é€‰æ‹©é…ç½®
âœ… TypeScript
âœ… ESLint
âœ… Tailwind CSS
âœ… App Router
âœ… src/ directory
âŒ Turbopack

# è¿›å…¥é¡¹ç›®
cd pet-emoji-generator

# å®‰è£…ä¾èµ–
npm install @supabase/supabase-js @aws-sdk/client-s3
```

### 2.3 æ ¸å¿ƒåŠŸèƒ½å®ç° (ä½¿ç”¨ Cursor)

**åŠŸèƒ½æ¸…å•**:
- [ ] ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
- [ ] AI ç”Ÿæˆ 9 å®«æ ¼è¡¨æƒ…åŒ…
- [ ] å›¾ç‰‡ä¿å­˜åˆ° R2
- [ ] ç”Ÿæˆè®°å½•å­˜å…¥ Supabase
- [ ] ç‚¹èµ/ä¸‹è½½ç»Ÿè®¡
- [ ] SEO ä¼˜åŒ–

**Cursor å¼€å‘æç¤ºè¯ç¤ºä¾‹**:

```
éœ€æ±‚: å®ç°å® ç‰©è¡¨æƒ…åŒ…ç”Ÿæˆå™¨

æŠ€æœ¯æ ˆ:
- Next.js 14 (App Router)
- Supabase æ•°æ®åº“
- Cloudflare R2 å­˜å‚¨
- Tailwind CSS

åŠŸèƒ½:
1. é¦–é¡µ: ä¸Šä¼ å® ç‰©ç…§ç‰‡
2. è°ƒç”¨ AI API ç”Ÿæˆ 9 å®«æ ¼è¡¨æƒ…åŒ…
3. å°†ç”Ÿæˆçš„å›¾ç‰‡ä¸Šä¼ åˆ° R2
4. è®°å½•ç”Ÿæˆä¿¡æ¯åˆ° Supabase
5. å±•ç¤ºç”Ÿæˆç»“æœ,æ”¯æŒä¸‹è½½
6. ç»Ÿè®¡ç‚¹èµå’Œä¸‹è½½æ¬¡æ•°

è¯·ç”Ÿæˆå®Œæ•´ä»£ç ç»“æ„
```

### 2.4 é¡¹ç›®ç»“æ„

```
pet-emoji-generator/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx          # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ generate/route.ts  # AI ç”Ÿæˆ API
â”‚   â”‚   â”‚   â”œâ”€â”€ upload/route.ts    # R2 ä¸Šä¼  API
â”‚   â”‚   â”‚   â””â”€â”€ stats/route.ts     # ç»Ÿè®¡ API
â”‚   â”‚   â”œâ”€â”€ gallery/page.tsx  # ä½œå“ç”»å»Š
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ UploadForm.tsx
â”‚   â”‚   â”œâ”€â”€ ImageGrid.tsx
â”‚   â”‚   â””â”€â”€ DownloadButton.tsx
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ supabase.ts       # Supabase å®¢æˆ·ç«¯
â”‚       â””â”€â”€ r2.ts             # R2 å®¢æˆ·ç«¯
â”œâ”€â”€ .env.local                # ç¯å¢ƒå˜é‡
â””â”€â”€ package.json
```

---

## ğŸŒ Step 3: éƒ¨ç½²åˆ° Vercel + ç»‘å®šåŸŸå

### 3.1 æ¨é€ä»£ç åˆ° GitHub

```bash
# åˆå§‹åŒ– Git
git init
git add .
git commit -m "Initial commit: Pet Emoji Generator"

# åˆ›å»º GitHub ä»“åº“å
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/pet-emoji-generator.git
git branch -M main
git push -u origin main
```

### 3.2 éƒ¨ç½²åˆ° Vercel

#### æ­¥éª¤ 1: å¯¼å…¥ GitHub ä»“åº“

```
è®¿é—® Vercel.com â†’ ç™»å½•
    â†“
ç‚¹å‡» "Add New..." â†’ "Project"
    â†“
é€‰æ‹© "Import Git Repository" â†’ "GitHub"
    â†“
æ‰¾åˆ° pet-emoji-generator â†’ "Import"
```

#### æ­¥éª¤ 2: é…ç½®é¡¹ç›®

| å­—æ®µ | å€¼ | è¯´æ˜ |
|-----|----|----|
| **Framework Preset** | Next.js | è‡ªåŠ¨è¯†åˆ« |
| **Build Command** | `npm run build` | é»˜è®¤ |
| **Output Directory** | `.next` | é»˜è®¤ |

#### æ­¥éª¤ 3: æ·»åŠ ç¯å¢ƒå˜é‡

**ç°åœ¨å…ˆè·³è¿‡,åç»­é…ç½®å®Œ R2 å’Œ Supabase åå†æ·»åŠ **

#### æ­¥éª¤ 4: éƒ¨ç½²

```
ç‚¹å‡» "Deploy"
    â†“
ç­‰å¾… 1-3 åˆ†é’Ÿ
    â†“
è·å¾— Vercel é»˜è®¤åŸŸå: https://pet-emoji-generator.vercel.app
```

### 3.3 ç»‘å®šè‡ªå®šä¹‰åŸŸååˆ° Vercel

#### æ­¥éª¤ 1: åœ¨ Vercel æ·»åŠ åŸŸå

```
Vercel Dashboard â†’ é€‰æ‹©é¡¹ç›® â†’ Settings â†’ Domains
    â†“
ç‚¹å‡» "Add" æŒ‰é’®
    â†“
è¾“å…¥åŸŸå: petemojimaker.com (æˆ– www.petemojimaker.com)
    â†“
ç‚¹å‡» "Add"
```

**Vercel ä¼šæç¤ºéœ€è¦é…ç½®çš„ DNS è®°å½•**,ç±»ä¼¼:

```
Type: A
Name: @
Value: 76.76.21.21

Type: CNAME
Name: www
Value: cname.vercel-dns.com
```

#### æ­¥éª¤ 2: åœ¨ Namecheap é…ç½® DNS

```
ç™»å½• Namecheap â†’ Domain List
    â†“
é€‰æ‹©åŸŸå â†’ Manage â†’ Advanced DNS
    â†“
æ·»åŠ  DNS è®°å½•:
```

| ç±»å‹ | ä¸»æœº | å€¼ | TTL |
|-----|------|----|----|
| `A Record` | `@` | `76.76.21.21` | Automatic |
| `CNAME Record` | `www` | `cname.vercel-dns.com` | Automatic |

```
ä¿å­˜
    â†“
ç­‰å¾… 10-30 åˆ†é’Ÿ DNS ç”Ÿæ•ˆ
    â†“
å›åˆ° Vercel,åŸŸåçŠ¶æ€å˜ä¸º "Valid Configuration"
```

#### æ­¥éª¤ 3: HTTPS è‡ªåŠ¨å¯ç”¨

Vercel ä¼šè‡ªåŠ¨ç”³è¯· Let's Encrypt SSL è¯ä¹¦,æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

**éªŒè¯**:
- è®¿é—® `https://petemojimaker.com`
- çœ‹åˆ°æµè§ˆå™¨å°ç»¿é” ğŸ”’

---

## ğŸ–¼ï¸ Step 4: é…ç½® Cloudflare R2 å›¾ç‰‡å­˜å‚¨

### 4.1 ä¸ºä»€ä¹ˆç”¨ R2?

**Vercel å†…ç½®å­˜å‚¨ vs Cloudflare R2**:

| å¯¹æ¯”é¡¹ | Vercel | Cloudflare R2 |
|-------|--------|--------------|
| å…è´¹é¢åº¦ | 100MB | **10GB** |
| ä»·æ ¼ | æ˜‚è´µ | S3 çš„ 1/10 |
| é€‚åˆåœºæ™¯ | å°æ–‡ä»¶ | å›¾ç‰‡/è§†é¢‘ç«™ |

### 4.2 åˆ›å»º R2 Bucket

#### æ­¥éª¤ 1: æ³¨å†Œ Cloudflare

```
è®¿é—® Cloudflare.com â†’ æ³¨å†Œ/ç™»å½•
    â†“
éªŒè¯é‚®ç®±
```

#### æ­¥éª¤ 2: åˆ›å»º Bucket

```
Cloudflare Dashboard â†’ R2 â†’ "Create bucket"
    â†“
Bucket name: pet-emojis (åªèƒ½å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦)
    â†“
Location: Automatic (æˆ–é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„åŒºåŸŸ)
    â†“
ç‚¹å‡» "Create bucket"
```

#### æ­¥éª¤ 3: å¼€å¯å…¬å¼€è®¿é—®

```
è¿›å…¥ Bucket â†’ Settings â†’ Public access
    â†“
ç‚¹å‡» "Allow Access" (å…è®¸å…¬å¼€è®¿é—®)
    â†“
ç¡®è®¤
```

### 4.3 ç»‘å®šè‡ªå®šä¹‰åŸŸååˆ° R2

**ä¸ºä»€ä¹ˆè¦ç»‘å®šåŸŸå?**
- âœ… æ›´ä¸“ä¸š (`img.example.com` vs `xxx.r2.cloudflarestorage.com`)
- âœ… æ›´å¥½çš„ SEO
- âœ… é˜²ç›—é“¾æ§åˆ¶

#### å‰ææ¡ä»¶: å°†åŸŸåæ‰˜ç®¡åˆ° Cloudflare

**å¦‚æœåŸŸååœ¨ Namecheap**:

```
ç¬¬1æ­¥: Cloudflare Dashboard â†’ "æ·»åŠ ç«™ç‚¹"
    â†“
ç¬¬2æ­¥: è¾“å…¥åŸŸå petemojimaker.com â†’ "æ·»åŠ ç«™ç‚¹"
    â†“
ç¬¬3æ­¥: é€‰æ‹© "Free" å…è´¹è®¡åˆ’ â†’ "ç»§ç»­"
    â†“
ç¬¬4æ­¥: Cloudflare æ‰«æ DNS è®°å½• â†’ "ç»§ç»­"
    â†“
ç¬¬5æ­¥: Cloudflare ç»™ä½ ä¸¤ä¸ª Nameserver åœ°å€:
    amber.ns.cloudflare.com
    logan.ns.cloudflare.com
```

**åœ¨ Namecheap ä¿®æ”¹ Nameservers**:

```
Namecheap â†’ Domain List â†’ Manage
    â†“
Domain â†’ Nameservers â†’ "Custom DNS"
    â†“
åˆ é™¤é»˜è®¤çš„ Nameservers
    â†“
æ·»åŠ  Cloudflare çš„ä¸¤ä¸ªåœ°å€:
    amber.ns.cloudflare.com
    logan.ns.cloudflare.com
    â†“
ä¿å­˜ â†’ ç­‰å¾… 10 åˆ†é’Ÿ - 24 å°æ—¶ç”Ÿæ•ˆ
```

**ç­‰å¾… Cloudflare é‚®ä»¶ç¡®è®¤**: "Your site is active on Cloudflare"

#### ç»‘å®šå­åŸŸååˆ° R2

```
Cloudflare Dashboard â†’ R2 â†’ é€‰æ‹© Bucket (pet-emojis)
    â†“
Custom Domains â†’ "Connect domain"
    â†“
è¾“å…¥å­åŸŸå: img.petemojimaker.com
    â†“
ç‚¹å‡» "Continue"
    â†“
Cloudflare è‡ªåŠ¨æ·»åŠ  DNS è®°å½•
    â†“
ç­‰å¾… 5-15 åˆ†é’Ÿç”Ÿæ•ˆ
```

**éªŒè¯**:
- è®¿é—® `https://img.petemojimaker.com/test.png` (ä¸Šä¼ æµ‹è¯•æ–‡ä»¶å)
- èƒ½æ­£å¸¸è®¿é—®å³æˆåŠŸ

### 4.4 è·å– R2 API å‡­è¯

**ç”¨äºä»£ç ä¸Šä¼ æ–‡ä»¶åˆ° R2**:

```
Cloudflare Dashboard â†’ R2 â†’ Overview
    â†“
"Manage R2 API Tokens" â†’ "Create API token"
    â†“
Token name: pet-emoji-uploader
    â†“
Permissions: "Object Read & Write"
    â†“
ç‚¹å‡» "Create API Token"
    â†“
å¤åˆ¶ä¿å­˜:
    - Access Key ID
    - Secret Access Key
    - Endpoint (S3 å…¼å®¹ç«¯ç‚¹)
```

**ä¿å­˜åˆ° `.env.local`**:

```bash
# Cloudflare R2
R2_ACCOUNT_ID=ä½ çš„è´¦å·ID
R2_ACCESS_KEY_ID=å¤åˆ¶çš„ Access Key ID
R2_SECRET_ACCESS_KEY=å¤åˆ¶çš„ Secret Access Key
R2_BUCKET_NAME=pet-emojis
R2_PUBLIC_URL=https://img.petemojimaker.com
```

---

## ğŸ—„ï¸ Step 5: é…ç½® Supabase æ•°æ®åº“

### 5.1 åˆ›å»º Supabase é¡¹ç›®

```
è®¿é—® Supabase.com â†’ æ³¨å†Œ/ç™»å½•
    â†“
"New project"
    â†“
å¡«å†™ä¿¡æ¯:
    Project name: pet-emoji-generator
    Database Password: ç”Ÿæˆå¼ºå¯†ç  (ä¿å­˜!)
    Region: Southeast Asia (Singapore) - ç¦»ä¸­å›½æœ€è¿‘
    â†“
é€‰æ‹© "Free" å…è´¹è®¡åˆ’
    â†“
ç‚¹å‡» "Create new project"
    â†“
ç­‰å¾… 2-3 åˆ†é’Ÿåˆ›å»ºå®Œæˆ
```

### 5.2 åˆ›å»ºæ•°æ®è¡¨

**è¿›å…¥ SQL Editor**:

```
Supabase Dashboard â†’ SQL Editor â†’ "New query"
```

**æ‰§è¡Œ SQL**:

```sql
-- åˆ›å»ºè¡¨: è®°å½•å›¾ç‰‡ç”Ÿæˆä¿¡æ¯
create table if not exists emoji_generations (
  id uuid primary key default gen_random_uuid(),
  image_url text not null,
  prompt text,
  ip varchar(64),
  created_at timestamp with time zone default now(),
  likes int default 0,
  downloads int default 0
);

-- åˆ›å»ºç´¢å¼•: åŠ é€ŸæŸ¥è¯¢
create index idx_created_at on emoji_generations(created_at desc);

-- å¯ç”¨è¡Œçº§å®‰å…¨ (RLS)
alter table emoji_generations enable row level security;

-- åˆ›å»ºç­–ç•¥: å…è®¸æ‰€æœ‰äººè¯»å–
create policy "Allow public read access"
  on emoji_generations
  for select
  using (true);

-- åˆ›å»ºç­–ç•¥: å…è®¸æ‰€æœ‰äººæ’å…¥ (å®é™…åº”è¯¥é™åˆ¶)
create policy "Allow public insert"
  on emoji_generations
  for insert
  with check (true);
```

ç‚¹å‡» "Run" æ‰§è¡Œã€‚

### 5.3 è·å– Supabase API Keys

```
Supabase Dashboard â†’ Settings â†’ API
    â†“
å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯:
```

| Key åç§° | ç”¨é€” | æš´éœ²åˆ°å‰ç«¯? |
|---------|------|-----------|
| **Project URL** | Supabase é¡¹ç›®åœ°å€ | âœ… å¯ä»¥ |
| **anon public key** | å‰ç«¯å…¬å¼€è®¿é—® | âœ… å¯ä»¥ |
| **service_role key** | åç«¯ç®¡ç†å‘˜æƒé™ | âŒ ç»ä¸! |

**ä¿å­˜åˆ° `.env.local`**:

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_KEY=eyJhbGc...  # ä»…åç«¯ä½¿ç”¨!
```

---

## ğŸ”§ Step 6: å®Œæ•´ç¯å¢ƒå˜é‡é…ç½®

### 6.1 æœ¬åœ°å¼€å‘ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶:

```bash
# Vercel éƒ¨ç½²
NEXT_PUBLIC_SITE_URL=https://petemojimaker.com

# Supabase æ•°æ®åº“
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_KEY=eyJhbGc...

# Cloudflare R2 å­˜å‚¨
R2_ACCOUNT_ID=ä½ çš„è´¦å·ID
R2_ACCESS_KEY_ID=xxx
R2_SECRET_ACCESS_KEY=xxx
R2_BUCKET_NAME=pet-emojis
R2_PUBLIC_URL=https://img.petemojimaker.com

# AI API (ç¤ºä¾‹: Replicate)
REPLICATE_API_TOKEN=r8_xxx
```

### 6.2 åœ¨ Vercel æ·»åŠ ç¯å¢ƒå˜é‡

```
Vercel Dashboard â†’ é€‰æ‹©é¡¹ç›® â†’ Settings â†’ Environment Variables
    â†“
é€ä¸ªæ·»åŠ ä¸Šè¿°å˜é‡:
```

**æ·»åŠ æ–¹æ³•**:
1. Name: `NEXT_PUBLIC_SUPABASE_URL`
2. Value: `https://xxxxx.supabase.co`
3. Environment: é€‰æ‹© `Production`, `Preview`, `Development`
4. ç‚¹å‡» "Save"

**é‡å¤æ·»åŠ æ‰€æœ‰å˜é‡**

**é‡æ–°éƒ¨ç½²**:

```
Deployments â†’ æœ€æ–°éƒ¨ç½² â†’ "Redeploy"
```

---

## ğŸ“Š Step 7: SEO ä¼˜åŒ– (å…è´¹æµé‡!)

### 7.1 ä¸ºä»€ä¹ˆè¦åš SEO?

**SEO = å…è´¹çš„æŒç»­æµé‡æ¥æº**

| æµé‡æ¥æº | æˆæœ¬ | æŒç»­æ€§ | éš¾åº¦ |
|---------|------|-------|------|
| **SEO (æœç´¢å¼•æ“)** | å…è´¹ | é•¿æœŸ | ä¸­ |
| å¹¿å‘ŠæŠ•æ”¾ | é«˜ | çŸ­æœŸ | ä½ |
| ç¤¾äº¤åª’ä½“ | ä½ | çŸ­æœŸ | ä¸­ |

### 7.2 SEO æ¸…å• (å¿…åš 7 é¡¹)

#### âœ… 1. ç”Ÿæˆ `sitemap.xml`

**Next.js App Router**: åˆ›å»º `src/app/sitemap.ts`

```typescript
import { MetadataRoute } from 'next'

export default function sitemap(): MetadataRoute.Sitemap {
  return [
    {
      url: 'https://petemojimaker.com',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: 'https://petemojimaker.com/gallery',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 0.8,
    },
  ]
}
```

**è®¿é—®**: `https://petemojimaker.com/sitemap.xml`

#### âœ… 2. ç”Ÿæˆ `robots.txt`

åˆ›å»º `src/app/robots.ts`:

```typescript
import { MetadataRoute } from 'next'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
      disallow: '/api/',
    },
    sitemap: 'https://petemojimaker.com/sitemap.xml',
  }
}
```

**è®¿é—®**: `https://petemojimaker.com/robots.txt`

#### âœ… 3. ä¼˜åŒ–é¡µé¢å…ƒæ•°æ®

**é¦–é¡µ `src/app/page.tsx`**:

```typescript
import { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'Pet Emoji Generator - Turn Your Pet into 9-Grid Emojis',
  description: 'Free AI-powered tool to transform your pet photos into adorable 9-grid emoji packs. Upload, generate, and download instantly!',
  keywords: ['pet emoji', 'emoji generator', 'pet stickers', 'AI pet'],
  openGraph: {
    title: 'Pet Emoji Generator',
    description: 'Turn your pet into cute emojis!',
    url: 'https://petemojimaker.com',
    siteName: 'Pet Emoji Maker',
    images: [
      {
        url: 'https://img.petemojimaker.com/og-image.png',
        width: 1200,
        height: 630,
      },
    ],
    locale: 'en_US',
    type: 'website',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Pet Emoji Generator',
    description: 'Turn your pet into cute emojis!',
    images: ['https://img.petemojimaker.com/og-image.png'],
  },
}
```

#### âœ… 4. è¯­ä¹‰åŒ– HTML

```jsx
{/* âŒ é”™è¯¯ */}
<div className="title">Pet Emoji Generator</div>

{/* âœ… æ­£ç¡® */}
<h1>Pet Emoji Generator</h1>
<h2>How It Works</h2>
<h3>Step 1: Upload Photo</h3>

{/* å›¾ç‰‡æ·»åŠ æœ‰æ„ä¹‰çš„ alt */}
<Image
  src="/example.jpg"
  alt="Cute dog emoji generated by AI"
  width={300}
  height={300}
/>
```

#### âœ… 5. æäº¤åˆ° Google Search Console

```
è®¿é—® Google Search Console:
https://search.google.com/search-console
    â†“
"æ·»åŠ èµ„æº" â†’ è¾“å…¥ petemojimaker.com
    â†“
éªŒè¯æ‰€æœ‰æƒ (é€‰æ‹© "HTML æ ‡è®°" æ–¹å¼):
    å¤åˆ¶ meta æ ‡ç­¾ â†’ æ·»åŠ åˆ° layout.tsx <head>
    â†“
ç‚¹å‡» "éªŒè¯"
    â†“
æäº¤ Sitemap:
    å·¦ä¾§èœå• "ç«™ç‚¹åœ°å›¾" â†’ è¾“å…¥ sitemap.xml â†’ "æäº¤"
```

#### âœ… 6. æäº¤åˆ° Bing Webmaster Tools

```
è®¿é—® Bing Webmaster Tools:
https://www.bing.com/webmasters
    â†“
"æ·»åŠ ç«™ç‚¹" â†’ è¾“å…¥ petemojimaker.com
    â†“
éªŒè¯æ–¹å¼: "ä» Google Search Console å¯¼å…¥"
    â†“
æäº¤ Sitemap: sitemap.xml
```

#### âœ… 7. æ€§èƒ½ä¼˜åŒ–

```jsx
{/* å›¾ç‰‡æ‡’åŠ è½½ */}
<Image
  src="/image.jpg"
  loading="lazy"
  alt="..."
/>

{/* å‹ç¼©å›¾ç‰‡ */}
// ä½¿ç”¨ webp/avif æ ¼å¼
// é€‚å½“çš„å°ºå¯¸ (ä¸è¦åŠ è½½ 4K å›¾ç‰‡æ˜¾ç¤º 300px)
```

### 7.3 æ¨å¹¿å»ºè®® (è·å–å¤–é“¾)

**åœ¨è¿™äº›å¹³å°å‘å¸ƒ**:
- âœ… [Product Hunt](https://www.producthunt.com/) - ç§‘æŠ€äº§å“
- âœ… [V2EX](https://www.v2ex.com/) - ç¨‹åºå‘˜ç¤¾åŒº
- âœ… [Twitter/X](https://twitter.com/) - ç¤¾äº¤åª’ä½“
- âœ… [Reddit](https://www.reddit.com/) - ç›¸å…³ subreddit
- âœ… [Hacker News](https://news.ycombinator.com/) - æŠ€æœ¯æ–°é—»

**å‘å¸ƒç­–ç•¥**:
1. **æ ‡é¢˜**: ç®€æ´ã€å¸å¼•äºº
2. **å†…å®¹**: çªå‡ºç—›ç‚¹å’Œè§£å†³æ–¹æ¡ˆ
3. **æˆªå›¾**: å±•ç¤ºå®é™…æ•ˆæœ
4. **é“¾æ¥**: æ”¾åœ¨è¯„è®ºåŒºæˆ–ç®€ä»‹

---

## â“ å¸¸è§é—®é¢˜ (FAQ)

### Q1: R2 è‡ªå®šä¹‰åŸŸä¸ºä»€ä¹ˆä¸€ç›´éªŒè¯ä¸é€šè¿‡?

**åŸå› **: åŸŸå DNS æœªæ‰˜ç®¡åˆ° Cloudflareã€‚

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤åŸŸå Nameservers å·²æ”¹ä¸º Cloudflare
2. ç­‰å¾… DNS ç”Ÿæ•ˆ (10 åˆ†é’Ÿ - 24 å°æ—¶)
3. åœ¨ Cloudflare çœ‹åˆ° "Active" çŠ¶æ€åå†ç»‘å®š R2

---

### Q2: Vercel éœ€è¦è‡ªå·±é…ç½® SSL å—?

**ç­”**: ä¸éœ€è¦ã€‚

Vercel è‡ªåŠ¨ç”³è¯· Let's Encrypt è¯ä¹¦å¹¶ç»­æœŸ,åŸŸå DNS ç”Ÿæ•ˆåä¼šè‡ªåŠ¨å¼€å¯ HTTPSã€‚

---

### Q3: Supabase çš„ key ä¼šä¸ä¼šæ³„éœ²?

**ç­”**: åˆ†æƒ…å†µã€‚

- âœ… `ANON_KEY` å¯ä»¥æ”¾å‰ç«¯,ä½†åŠ¡å¿…é…ç½® RLS (è¡Œçº§å®‰å…¨)
- âŒ `SERVICE_ROLE_KEY` ç»å¯¹ä¸èƒ½æš´éœ²,åªèƒ½åœ¨æœåŠ¡ç«¯ä½¿ç”¨

**æœ€ä½³å®è·µ**:
```typescript
// âœ… å‰ç«¯: ä½¿ç”¨ ANON_KEY
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)

// âœ… æœåŠ¡ç«¯: ä½¿ç”¨ SERVICE_ROLE_KEY
const supabaseAdmin = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_KEY! // ä»…æœåŠ¡ç«¯ç¯å¢ƒå˜é‡
)
```

---

### Q4: å…è´¹é¢åº¦å¤Ÿç”¨å—?

**ç­”**: æ—©æœŸå®Œå…¨å¤Ÿç”¨!

| æœåŠ¡ | å…è´¹é¢åº¦ | æ—©æœŸé¡¹ç›®å¤Ÿç”¨å—? |
|-----|---------|---------------|
| **Vercel** | 100 GB å¸¦å®½/æœˆ | âœ… å®Œå…¨å¤Ÿ |
| **Cloudflare R2** | 10 GB å­˜å‚¨ | âœ… å¤Ÿå‡ åƒå¼ å›¾ç‰‡ |
| **Supabase** | 500 MB DB / 1 GB æ–‡ä»¶ / 200K è¯·æ±‚/æœˆ | âœ… å®Œå…¨å¤Ÿ |

**è¶…å‡ºåæ€ä¹ˆåŠ?**
- Vercel: å‡çº§ Pro ($20/æœˆ)
- R2: è¶…å‡ºå $0.015/GB/æœˆ (å¾ˆä¾¿å®œ)
- Supabase: å‡çº§ Pro ($25/æœˆ)

---

### Q5: ä¸ºä»€ä¹ˆä¸ç”¨ Vercel è‡ªå¸¦çš„å­˜å‚¨?

**ç­”**: å¤ªè´µäº†!

| å¯¹æ¯”é¡¹ | Vercel Blob | Cloudflare R2 |
|-------|------------|--------------|
| å…è´¹é¢åº¦ | 100 MB | **10 GB** |
| è¶…å‡ºä»·æ ¼ | $0.20/GB | $0.015/GB |
| å¸¦å®½è´¹ç”¨ | $0.20/GB | **å…è´¹** |

**ç»“è®º**: R2 ä¾¿å®œ 10 å€ä»¥ä¸Š!

---

### Q6: å¦‚ä½•é˜²æ­¢æ¶æ„ä¸Šä¼ ?

**è§£å†³æ–¹æ¡ˆ**:

1. **é™åˆ¶æ–‡ä»¶å¤§å°**:
```typescript
// æœ€å¤§ 5MB
if (file.size > 5 * 1024 * 1024) {
  throw new Error('File too large')
}
```

2. **é™åˆ¶æ–‡ä»¶ç±»å‹**:
```typescript
const allowedTypes = ['image/jpeg', 'image/png', 'image/webp']
if (!allowedTypes.includes(file.type)) {
  throw new Error('Invalid file type')
}
```

3. **IP é™æµ**:
```typescript
// ä½¿ç”¨ Upstash Redis æˆ– Vercel KV
// é™åˆ¶æ¯ä¸ª IP æ¯å°æ—¶ 10 æ¬¡
```

4. **å›¾ç‰‡å†…å®¹å®¡æ ¸**:
```typescript
// ä½¿ç”¨ Cloudflare AI æˆ– Google Vision API
// æ£€æµ‹ä¸å½“å†…å®¹
```

---

### Q7: å›½å†…è®¿é—® Vercel æ…¢æ€ä¹ˆåŠ?

**è§£å†³æ–¹æ¡ˆ**:

1. **ä½¿ç”¨ Cloudflare CDN åŠ é€Ÿ** (è§åŸŸåé…ç½®æ•™ç¨‹ 3.3 èŠ‚)
2. **å›¾ç‰‡èµ° R2 è‡ªå®šä¹‰åŸŸ** (å·²ç»æ˜¯ Cloudflare CDN)
3. **è€ƒè™‘å¤‡é€‰æ–¹æ¡ˆ**:
   - Netlify (ç±»ä¼¼ Vercel)
   - Cloudflare Pages (å›½å†…é€Ÿåº¦æ›´å¿«)

---

## ğŸ“Š æˆæœ¬æ€»ç»“

### å¼€å‘æˆæœ¬

| é¡¹ç›® | è´¹ç”¨ | è¯´æ˜ |
|-----|------|------|
| **åŸŸå (Namecheap)** | $10-17/å¹´ | å”¯ä¸€å¿…éœ€è´¹ç”¨ |
| **Vercel** | å…è´¹ | 100 GB å¸¦å®½/æœˆ |
| **Cloudflare R2** | å…è´¹ | 10 GB å­˜å‚¨ |
| **Supabase** | å…è´¹ | 500 MB æ•°æ®åº“ |
| **å¼€å‘å·¥å…· (Cursor)** | å…è´¹/ä»˜è´¹ | å¯é€‰ |
| **AI API** | æŒ‰ç”¨é‡ | çœ‹ä½¿ç”¨æƒ…å†µ |

**æ€»è®¡**: $10-17/å¹´ (ä»…åŸŸåè´¹ç”¨)

### æ—¶é—´æˆæœ¬

| é˜¶æ®µ | ç”¨æ—¶ | è¯´æ˜ |
|-----|------|------|
| **å­¦ä¹ æ•™ç¨‹** | 2-4 å°æ—¶ | é˜…è¯»æ–‡æ¡£ |
| **å¼€å‘é¡¹ç›®** | 4-8 å°æ—¶ | ä½¿ç”¨ Cursor åŠ é€Ÿ |
| **é…ç½®éƒ¨ç½²** | 1-2 å°æ—¶ | æŒ‰æœ¬æ•™ç¨‹æ“ä½œ |
| **SEO ä¼˜åŒ–** | 1 å°æ—¶ | å¿…åšé¡¹ |

**æ€»è®¡**: åŠå¤© ~ 1 å¤©

---

## ğŸ¯ æ€»ç»“

### ä½ å­¦åˆ°äº†ä»€ä¹ˆ?

| æŠ€èƒ½ | æŒæ¡ç¨‹åº¦ |
|-----|---------|
| âœ… **Next.js å¼€å‘** | å…¥é—¨ â†’ ç†Ÿç»ƒ |
| âœ… **Vercel éƒ¨ç½²** | ä»é›¶åˆ°ä¸Šçº¿ |
| âœ… **åŸŸåé…ç½®** | å®Œå…¨ç†è§£ |
| âœ… **R2 å¯¹è±¡å­˜å‚¨** | æŒæ¡ä½¿ç”¨ |
| âœ… **Supabase æ•°æ®åº“** | åŸºç¡€ CRUD |
| âœ… **SEO ä¼˜åŒ–** | å¿«é€Ÿæ”¶å½• |

### ä¸‹ä¸€æ­¥å»ºè®®

1. **æ•°æ®åˆ†æ**: æ¥å…¥ Google Analytics æˆ– Cloudflare Web Analytics
2. **ç”¨æˆ·åé¦ˆ**: æ·»åŠ è¯„è®º/è¯„åˆ†åŠŸèƒ½
3. **å˜ç°æ¢ç´¢**:
   - å¹¿å‘Š (Google AdSense)
   - ä»˜è´¹åŠŸèƒ½ (Stripe)
   - ä¼šå‘˜è®¢é˜…
4. **æŒç»­ä¼˜åŒ–**: æ ¹æ®ç”¨æˆ·åé¦ˆè¿­ä»£åŠŸèƒ½
5. **æ¨å¹¿**: å®šæœŸåœ¨ç¤¾äº¤åª’ä½“åˆ†äº«

---

## ğŸ“– ç›¸å…³æ•™ç¨‹

- [Vercel é…ç½®è¯¦è§£](./01_vercelé…ç½®.md)
- [åŸŸåé…ç½®è¯¦è§£](./02_åŸŸåé…ç½®.md)
- [Supabase é…ç½®è¯¦è§£](./03_supabaseé…ç½®.md)
- [Stripe æ”¯ä»˜é…ç½®](./04_stripeæ”¯ä»˜.md)

---

**è®°ä½**:
- å…ˆåšå‡ºæœ€å°å¯ç”¨ç‰ˆæœ¬ (MVP)
- è®©çœŸå®ç”¨æˆ·ç”¨èµ·æ¥
- æ ¹æ®åé¦ˆå¿«é€Ÿè¿­ä»£
- æŒç»­ä¼˜åŒ–ä½“éªŒä¸å˜ç°

ç”¨ Vercel + Cloudflare R2 + Supabase,ä¸ªäººä¹Ÿèƒ½åœ¨ 0 é¢„ç®—å†…æŠŠå›¾ç‰‡ç«™è·‘èµ·æ¥!

ğŸ‰ **å¼€å§‹ä½ çš„ AI å›¾ç‰‡ç«™ä¹‹æ—…å§!** ğŸ‰

---

> ğŸ’¡ **Vibe Coding å¿ƒæ³•**: ä¸è¦è¿½æ±‚å®Œç¾!å…ˆç”¨ Cursor å¿«é€Ÿæ­å»º MVP,éƒ¨ç½²ä¸Šçº¿è®©çœŸå®ç”¨æˆ·ä½¿ç”¨,ç„¶åæ ¹æ®åé¦ˆå¿«é€Ÿè¿­ä»£ã€‚å®Œç¾çš„äº§å“æ˜¯è¿­ä»£å‡ºæ¥çš„,ä¸æ˜¯ä¸€å¼€å§‹è®¾è®¡å‡ºæ¥çš„!