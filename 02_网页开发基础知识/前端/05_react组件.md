# React ç»„ä»¶åŸºç¡€

> **æ–¹æ³•è®º**ï¼šç»„ä»¶ = å¯å¤ç”¨çš„ç§¯æœ¨ã€‚ç†è§£ Props å’Œ Stateï¼Œå°±ç†è§£äº† React çš„ 80%ã€‚

![Props vs State](./images/05_props_state.png)

---

## ğŸ“– æœ¬èŠ‚ç›®æ ‡

å­¦å®Œæœ¬èŠ‚ï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… ç†è§£ä»€ä¹ˆæ˜¯ç»„ä»¶
- âœ… æŒæ¡ Propsï¼ˆä¼ é€’æ•°æ®ï¼‰
- âœ… æŒæ¡ Stateï¼ˆç®¡ç†çŠ¶æ€ï¼‰
- âœ… å­¦ä¼šæœ€å¸¸ç”¨çš„ Hooks

**é¢„è®¡ç”¨æ—¶**ï¼š25 åˆ†é’Ÿ

---

## 0. å¼€å§‹å‰å¿…çœ‹ï¼šVibe Coding å¿ƒæ³•(é‡è¦!)

### 0.1 ä¸è¦è¢«è¯­æ³•å“åˆ°!

> **âš ï¸ Vibe Coder çš„æ•‘å‘½ç¨»è‰!**
>
> React çš„ä»£ç çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†ä½ **ä¸éœ€è¦ç²¾é€šæ‰€æœ‰è¯­æ³•ç»†èŠ‚**ã€‚ä¸‹é¢å‘Šè¯‰ä½ å“ªäº›è¦æ‡‚ï¼Œå“ªäº›äº¤ç»™ AIã€‚

**ä½ å¿…é¡»ç†è§£çš„é€»è¾‘ï¼ˆæ ¸å¿ƒæ¦‚å¿µï¼‰**ï¼š

| æ¦‚å¿µ | ä½ è¦æ‡‚ä»€ä¹ˆ | ä¸ºä»€ä¹ˆé‡è¦ |
|------|-----------|----------|
| **ç»„ä»¶** | ä»€ä¹ˆæ˜¯ç»„ä»¶ã€ä¸ºä»€ä¹ˆè¦æ‹†ç»„ä»¶ | è¿™æ˜¯æ€ç»´æ–¹å¼ï¼ŒAI å†™ä¸äº† |
| **Props** | æ•°æ®ä»å¤–éƒ¨ä¼ å…¥ç»„ä»¶ | ç†è§£æ•°æ®æµå‘ |
| **State** | ç»„ä»¶å†…éƒ¨æœ‰"è®°å¿†"ï¼Œä¼šå˜åŒ– | ç†è§£äº¤äº’åŸç† |
| **ä½•æ—¶ç”¨ State** | ç‚¹å‡»ã€è¾“å…¥ç­‰éœ€è¦å˜åŒ–çš„ç”¨ State | åˆ¤æ–­ç”¨ä¸ç”¨ State |

**AI å¯ä»¥ä»£åŠ³çš„è¯­æ³•ï¼ˆç»†èŠ‚å†™æ³•ï¼‰**ï¼š

| è¯­æ³• | ä¾‹å­ | ä¸ç”¨èƒŒï¼ |
|------|------|---------|
| Props ç±»å‹å®šä¹‰ | `{ text }: { text: string }` | è®© AI å†™ âœ… |
| è§£æ„è¯­æ³• | `{ title, price, image }` | è®© AI å†™ âœ… |
| TypeScript æ¥å£ | `interface ButtonProps {}` | è®© AI å†™ âœ… |
| Hooks å…·ä½“å†™æ³• | `const [x, setX] = useState()` | è®© AI å†™ âœ… |
| useEffect ä¾èµ–æ•°ç»„ | `useEffect(() => {}, [])` | è®© AI å†™ âœ… |

### 0.2 å­¦ä¹ ç­–ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬1æ­¥ï¼šç†è§£æ¦‚å¿µï¼ˆä½ çš„ä»»åŠ¡ï¼‰                  â”‚
â”‚  "ç»„ä»¶æ˜¯ä»€ä¹ˆï¼ŸProps å’Œ State æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"    â”‚
â”‚                                             â”‚
â”‚  ç¬¬2æ­¥ï¼šæè¿°éœ€æ±‚ï¼ˆä½ çš„ä»»åŠ¡ï¼‰                  â”‚
â”‚  "æˆ‘è¦ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç‚¹å‡»æŒ‰é’®æ•°å­—+1"             â”‚
â”‚                                             â”‚
â”‚  ç¬¬3æ­¥ï¼šAI ç”Ÿæˆä»£ç ï¼ˆAI çš„ä»»åŠ¡ï¼‰              â”‚
â”‚  AI ä¼šå†™å‡ºæ‰€æœ‰è¯­æ³•ç»†èŠ‚                       â”‚
â”‚                                             â”‚
â”‚  ç¬¬4æ­¥ï¼šè¿è¡Œè°ƒè¯•ï¼ˆä½ çš„ä»»åŠ¡ï¼‰                  â”‚
â”‚  çœ‹æ•ˆæœï¼Œä¸å¯¹å°±å‘Šè¯‰ AI "æ”¹æˆxxx"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Vibe Coding æ ¸å¿ƒ**ï¼šä½ è´Ÿè´£æƒ³æ˜ç™½"è¦åšä»€ä¹ˆ"ï¼ŒAI è´Ÿè´£å†™"æ€ä¹ˆåš"ã€‚çœ‹åˆ° `{ text }: { text: string }` è¿™ç§å¤æ‚è¯­æ³•ï¼Ÿ**è·³è¿‡ï¼ç›´æ¥é—® AI**ã€‚

---

## 1. ä»€ä¹ˆæ˜¯ç»„ä»¶ï¼Ÿ

### ä¸€å¥è¯è§£é‡Š

**ç»„ä»¶ = å¯å¤ç”¨çš„ UI ç§¯æœ¨**

æŠŠé¡µé¢æ‹†æˆä¸€ä¸ªä¸ªå°å—ï¼Œæ¯å—å°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼š

```
é¡µé¢
â”œâ”€â”€ Headerï¼ˆå¤´éƒ¨ç»„ä»¶ï¼‰
â”œâ”€â”€ ProductListï¼ˆäº§å“åˆ—è¡¨ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ ProductCardï¼ˆäº§å“å¡ç‰‡ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ ProductCard
â”‚   â””â”€â”€ ProductCard
â””â”€â”€ Footerï¼ˆåº•éƒ¨ç»„ä»¶ï¼‰
```

### ä¸ºä»€ä¹ˆè¦ç”¨ç»„ä»¶ï¼Ÿ

| é—®é¢˜ | ç»„ä»¶åŒ–è§£å†³æ–¹æ¡ˆ |
|------|---------------|
| ä»£ç é‡å¤ | å†™ä¸€æ¬¡ï¼Œåˆ°å¤„ç”¨ |
| éš¾ä»¥ç»´æŠ¤ | æ”¹ä¸€å¤„ï¼Œå…¨å±€ç”Ÿæ•ˆ |
| åä½œå›°éš¾ | åˆ†å·¥æ˜ç¡®ï¼Œå„å†™å„çš„ |

---

## 2. åˆ›å»ºç»„ä»¶

### 2.1 æœ€ç®€å•çš„ç»„ä»¶

```tsx
// ä¸€ä¸ªç®€å•çš„æŒ‰é’®ç»„ä»¶
function MyButton() {
  return (
    <button className="bg-blue-500 text-white px-4 py-2 rounded">
      ç‚¹å‡»æˆ‘
    </button>
  )
}

// ä½¿ç”¨ç»„ä»¶
export default function Page() {
  return (
    <div>
      <MyButton />
      <MyButton />
      <MyButton />
    </div>
  )
}
```

### 2.2 ç»„ä»¶æ–‡ä»¶ç»„ç»‡

æ¨èçš„æ–‡ä»¶ç»“æ„ï¼š

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ components/          # ğŸ‘ˆ ç»„ä»¶éƒ½æ”¾è¿™é‡Œ
    â”œâ”€â”€ Button.tsx
    â”œâ”€â”€ Card.tsx
    â”œâ”€â”€ Header.tsx
    â””â”€â”€ Footer.tsx
```

**åˆ›å»ºç»„ä»¶æ–‡ä»¶** `src/components/Button.tsx`ï¼š

```tsx
export default function Button() {
  return (
    <button className="bg-blue-500 text-white px-4 py-2 rounded">
      æŒ‰é’®
    </button>
  )
}
```

**åœ¨é¡µé¢ä½¿ç”¨**ï¼š

```tsx
import Button from '@/components/Button'

export default function Page() {
  return (
    <div>
      <Button />
    </div>
  )
}
```

---

## 3. Propsï¼šä¼ é€’æ•°æ®

### 3.1 ä»€ä¹ˆæ˜¯ Propsï¼Ÿ

**Props = ç»„ä»¶çš„å‚æ•°ï¼ˆä»å¤–åˆ°å†…çš„æ•°æ®ï¼‰**

**ç±»æ¯”**ï¼šProps å°±åƒ**å¿«é€’æ ‡ç­¾ğŸ“¦**

```
ä½ ï¼ˆçˆ¶ç»„ä»¶ï¼‰â†’ å¿«é€’æ ‡ç­¾ï¼ˆPropsï¼‰â†’ å¿«é€’å‘˜ï¼ˆå­ç»„ä»¶ï¼‰

<Button text="æäº¤" color="blue" />
         â†‘         â†‘
       Props    Props
```

**æ ¸å¿ƒç†è§£**ï¼š
- **çˆ¶ç»„ä»¶å†³å®š**ï¼šä¼ ä»€ä¹ˆæ•°æ®ï¼ˆå°±åƒä½ å†™å¿«é€’æ ‡ç­¾ä¸Šçš„æ”¶ä»¶äººã€åœ°å€ï¼‰
- **å­ç»„ä»¶æ¥æ”¶**ï¼šæ‹¿åˆ°æ•°æ®åæ˜¾ç¤ºï¼ˆå°±åƒå¿«é€’å‘˜æŒ‰æ ‡ç­¾é€è´§ï¼‰
- **å­ç»„ä»¶ä¸èƒ½æ”¹**ï¼šProps æ˜¯åªè¯»çš„ï¼ˆå¿«é€’å‘˜ä¸èƒ½æ”¹æ ‡ç­¾ï¼‰

### 3.2 æœ€ç®€å•çš„ä¾‹å­ï¼ˆçœ‹æ‡‚è¿™ä¸ªå°±å¤Ÿäº†ï¼ï¼‰

```tsx
// å®šä¹‰ç»„ä»¶ï¼Œæ¥æ”¶ props
function Button({ text }: { text: string }) {
  //         â†‘ è¿™é‡Œæ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„ text
  return (
    <button className="bg-blue-500 text-white px-4 py-2 rounded">
      {text}  {/* è¿™é‡Œæ˜¾ç¤º text çš„å€¼ */}
    </button>
  )
}

// ä½¿ç”¨ç»„ä»¶ï¼Œä¼ é€’ä¸åŒçš„ text
export default function Page() {
  return (
    <div className="flex gap-2">
      <Button text="æäº¤" />  {/* ä¼ å…¥ "æäº¤" */}
      <Button text="å–æ¶ˆ" />  {/* ä¼ å…¥ "å–æ¶ˆ" */}
      <Button text="åˆ é™¤" />  {/* ä¼ å…¥ "åˆ é™¤" */}
    </div>
  )
}
```

> **Vibe Coding æç¤º**ï¼šçœ‹åˆ° `{ text }: { text: string }` è§‰å¾—å¤´æ™•ï¼Ÿ
>
> **ä½ åªéœ€è¦ç†è§£**ï¼š`text` æ˜¯ä»å¤–é¢ä¼ è¿›æ¥çš„æ•°æ®ã€‚
>
> **è‡³äºä¸ºä»€ä¹ˆå†™ä¸¤æ¬¡ `text`ï¼Œä¸ºä»€ä¹ˆæœ‰å†’å·å’ŒèŠ±æ‹¬å·ï¼Ÿ** â†’ **åˆ«ç®¡ï¼è®© AI å†™ï¼**
>
> ä½ åªè¦çŸ¥é“ï¼š"æˆ‘è¦ç»™è¿™ä¸ªç»„ä»¶ä¼ ä¸ª text æ•°æ®ï¼Œç„¶åç»„ä»¶é‡Œèƒ½ç”¨ `{text}` æ˜¾ç¤ºå®ƒã€‚"
```

### 3.3 å¤šä¸ª Propsï¼ˆçœ‹æ‡‚å°±è¡Œï¼Œè®© AI å†™ï¼ï¼‰

```tsx
// å®šä¹‰ç±»å‹ï¼ˆè¿™éƒ¨åˆ†è®© AI å†™ï¼ï¼‰
interface ButtonProps {
  text: string
  color?: 'blue' | 'red' | 'green'  // å¯é€‰å‚æ•°
  onClick?: () => void              // ç‚¹å‡»äº‹ä»¶
}

function Button({ text, color = 'blue', onClick }: ButtonProps) {
  const colors = {
    blue: 'bg-blue-500 hover:bg-blue-600',
    red: 'bg-red-500 hover:bg-red-600',
    green: 'bg-green-500 hover:bg-green-600',
  }

  return (
    <button
      className={`${colors[color]} text-white px-4 py-2 rounded`}
      onClick={onClick}
    >
      {text}
    </button>
  )
}

// ä½¿ç”¨
<Button text="ç¡®è®¤" color="green" onClick={() => alert('ç‚¹å‡»äº†')} />
<Button text="åˆ é™¤" color="red" />
<Button text="æäº¤" />  {/* é»˜è®¤è“è‰² */}
```

> **Vibe Coding æç¤º**ï¼š
> - `interface ButtonProps { ... }` è¿™ç§ç±»å‹å®šä¹‰ï¼Ÿâ†’ **AI å†™ï¼**
> - `color?: 'blue' | 'red'` è¿™ç§å¯é€‰å‚æ•°è¯­æ³•ï¼Ÿâ†’ **AI å†™ï¼**
> - ä½ åªéœ€è¦æ‡‚ï¼š"`color` å‚æ•°å¯ä»¥ä¼  blue/red/greenï¼Œä¸ä¼ å°±é»˜è®¤ blue"

### 3.4 å®æˆ˜ï¼šäº§å“å¡ç‰‡ç»„ä»¶

```tsx
// src/components/ProductCard.tsx
interface ProductCardProps {
  title: string
  price: number
  image: string
  onBuy: () => void
}

export default function ProductCard({
  title,
  price,
  image,
  onBuy
}: ProductCardProps) {
  return (
    <div className="bg-white rounded-lg shadow p-4">
      <img src={image} alt={title} className="w-full h-48 object-cover rounded" />
      <h3 className="text-lg font-bold mt-2">{title}</h3>
      <p className="text-red-500 text-xl">Â¥{price}</p>
      <button
        onClick={onBuy}
        className="mt-2 w-full bg-blue-500 text-white py-2 rounded"
      >
        ç«‹å³è´­ä¹°
      </button>
    </div>
  )
}

// ä½¿ç”¨
import ProductCard from '@/components/ProductCard'

export default function Page() {
  const products = [
    { id: 1, title: 'iPhone 15', price: 5999, image: '/iphone.jpg' },
    { id: 2, title: 'MacBook Pro', price: 12999, image: '/macbook.jpg' },
  ]

  return (
    <div className="grid grid-cols-2 gap-4 p-4">
      {products.map(product => (
        <ProductCard
          key={product.id}
          title={product.title}
          price={product.price}
          image={product.image}
          onBuy={() => alert(`è´­ä¹° ${product.title}`)}
        />
      ))}
    </div>
  )
}
```

---

## 4. Stateï¼šç®¡ç†çŠ¶æ€

### 4.1 ä»€ä¹ˆæ˜¯ Stateï¼Ÿ

**State = ç»„ä»¶çš„"è®°å¿†"ï¼ˆä¼šå˜åŒ–çš„æ•°æ®ï¼‰**

**ç±»æ¯”**ï¼šState å°±åƒ**ç”µå­è®¡åˆ†æ¿ğŸ€**

```
æƒ³è±¡ä¸€ä¸ªç¯®çƒæ¯”èµ›çš„ç”µå­è®¡åˆ†æ¿ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»é˜Ÿ vs å®¢é˜Ÿ       â”‚
â”‚    23  :  18        â”‚  â† è¿™æ˜¯ Stateï¼ˆæ¯”åˆ†ä¼šå˜ï¼‰
â”‚   [+1] [+2] [+3]    â”‚  â† æŒ‰é’®æ”¹å˜æ¯”åˆ†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
1. æ¯”åˆ†ä¼šå˜ï¼ˆState ä¼šå˜ï¼‰
2. æŒ‰é’®ç‚¹å‡»åï¼Œæ¯”åˆ†è‡ªåŠ¨æ›´æ–°æ˜¾ç¤ºï¼ˆState å˜åŒ–ï¼Œé¡µé¢è‡ªåŠ¨åˆ·æ–°ï¼‰
3. æ¯ä¸ªè®¡åˆ†æ¿ç‹¬ç«‹è®¡æ•°ï¼ˆæ¯ä¸ªç»„ä»¶æœ‰è‡ªå·±çš„ Stateï¼‰
```

**Props vs State çš„åŒºåˆ«**ï¼š

| | Props | State |
|------|-------|-------|
| **æ¥æº** | å¤–éƒ¨ä¼ å…¥ | å†…éƒ¨åˆ›å»º |
| **èƒ½æ”¹å—** | âŒ ä¸èƒ½æ”¹ï¼ˆåªè¯»ï¼‰ | âœ… èƒ½æ”¹ï¼ˆå¯å˜ï¼‰ |
| **ç±»æ¯”** | å¿«é€’æ ‡ç­¾ï¼ˆæ”¶åˆ°å°±æ˜¯æ”¶åˆ°ï¼‰ | ç”µå­è®¡åˆ†æ¿ï¼ˆå¯ä»¥åŠ åˆ†ï¼‰ |
| **ç”¨é€”** | çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ æ•°æ® | ç»„ä»¶è®°ä½è‡ªå·±çš„çŠ¶æ€ |

### 4.2 æœ€ç®€å•çš„ä¾‹å­ï¼šè®¡æ•°å™¨

```tsx
'use client'  // ğŸ‘ˆ ä½¿ç”¨ State å¿…é¡»åŠ è¿™è¡Œï¼ˆä¸ºä»€ä¹ˆï¼Ÿåˆ«ç®¡ï¼Œè®°ä½å°±è¡Œï¼‰

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)  // åˆå§‹å€¼ä¸º 0
  //     â†‘      â†‘         â†‘
  //   å½“å‰å€¼  æ”¹å€¼çš„å‡½æ•°  åˆå§‹å€¼

  return (
    <div className="p-4">
      <p className="text-2xl">è®¡æ•°ï¼š{count}</p>
      <button
        onClick={() => setCount(count + 1)}
        className="bg-blue-500 text-white px-4 py-2 rounded mt-2"
      >
        +1
      </button>
    </div>
  )
}
```

### 4.3 State çš„"é­”æ³•"è§£é‡Šï¼ˆå¿…çœ‹ï¼ï¼‰

**å­¦ç”Ÿæœ€å¸¸é—®çš„é—®é¢˜**ï¼š

> **Q1: ä¸ºä»€ä¹ˆç”¨æ–¹æ‹¬å· `[count, setCount]`ï¼Ÿ**
>
> **A**: è¿™æ˜¯ JavaScript çš„"è§£æ„èµ‹å€¼"è¯­æ³•ï¼ˆè®© AI å†™å°±è¡Œï¼‰ã€‚
>
> ä½ åªéœ€è¦è®°ä½ï¼š`useState` ä¼šç»™ä½ **ä¸¤æ ·ä¸œè¥¿**ï¼š
> - ç¬¬ä¸€ä¸ªï¼šå½“å‰çš„å€¼ï¼ˆ`count`ï¼‰
> - ç¬¬äºŒä¸ªï¼šæ”¹å€¼çš„å‡½æ•°ï¼ˆ`setCount`ï¼‰
>
> å°±åƒç”µå­è®¡åˆ†æ¿ç»™ä½ ï¼š**å½“å‰æ¯”åˆ†** + **åŠ åˆ†æŒ‰é’®**

> **Q2: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ `count = count + 1`ï¼Ÿ**
>
> **A**: è¿™æ˜¯ React çš„è§„åˆ™ï¼
>
> **é”™è¯¯å†™æ³•**:
> ```tsx
> count = count + 1  // âŒ React ä¸çŸ¥é“å€¼å˜äº†ï¼Œé¡µé¢ä¸ä¼šæ›´æ–°
> ```
>
> **æ­£ç¡®å†™æ³•**:
> ```tsx
> setCount(count + 1)  // âœ… React çŸ¥é“äº†ï¼Œä¼šè‡ªåŠ¨åˆ·æ–°é¡µé¢
> ```
>
> **é€šä¿—ç†è§£**ï¼š
> - ç›´æ¥æ”¹ `count` = å·å·æ”¹è®¡åˆ†æ¿çš„æ•°å­—ï¼Œè§‚ä¼—çœ‹ä¸åˆ°å˜åŒ–
> - ç”¨ `setCount` = æ­£å¼æŒ‰ä¸‹æŒ‰é’®ï¼Œè®¡åˆ†æ¿ä¼šé—ªçƒæ›´æ–°ï¼Œæ‰€æœ‰äººéƒ½çœ‹åˆ°äº†
>
> **Vibe Coding æç¤º**ï¼šåˆ«çº ç»“ä¸ºä»€ä¹ˆï¼è®°ä½ï¼š**æ”¹ State å¿…é¡»ç”¨ `setXxx` å‡½æ•°**ã€‚

### 4.4 useState è¯­æ³•ï¼ˆAI å¸®ä½ å†™ï¼ï¼‰

```tsx
const [çŠ¶æ€å€¼, è®¾ç½®å‡½æ•°] = useState(åˆå§‹å€¼)

// ä¾‹å­ï¼ˆè¿™äº›è¯­æ³•ç»†èŠ‚è®© AI å†™ï¼ï¼‰
const [count, setCount] = useState(0)           // æ•°å­—
const [name, setName] = useState('')            // å­—ç¬¦ä¸²
const [isOpen, setIsOpen] = useState(false)     // å¸ƒå°”å€¼
const [items, setItems] = useState([])          // æ•°ç»„
const [user, setUser] = useState(null)          // å¯¹è±¡
```

> **ä½ åªéœ€è¦æ‡‚**ï¼š
> 1. ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯æ”¹å€¼çš„å‡½æ•°
> 2. æ”¹å€¼å¿…é¡»ç”¨ `setXxx` å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥èµ‹å€¼
> 3. **å…·ä½“çš„ TypeScript ç±»å‹æ ‡æ³¨ï¼Ÿ** â†’ AI å†™ï¼

### 4.5 å¸¸è§åœºæ™¯

**åœºæ™¯ 1ï¼šè¾“å…¥æ¡†**

```tsx
'use client'
import { useState } from 'react'

export default function SearchBox() {
  const [keyword, setKeyword] = useState('')

  return (
    <div>
      <input
        type="text"
        value={keyword}
        onChange={(e) => setKeyword(e.target.value)}
        className="border rounded px-3 py-2"
        placeholder="æœç´¢..."
      />
      <p>ä½ è¾“å…¥çš„æ˜¯ï¼š{keyword}</p>
    </div>
  )
}
```

> **ä½ åªéœ€è¦æ‡‚**ï¼šè¾“å…¥æ¡†çš„å€¼å­˜åœ¨ `keyword` é‡Œï¼Œè¾“å…¥æ—¶ç”¨ `setKeyword` æ›´æ–°ã€‚
>
> **`onChange={(e) => setKeyword(e.target.value)}` è¿™ç§å†™æ³•ï¼Ÿ** â†’ AI å†™ï¼

**åœºæ™¯ 2ï¼šæ˜¾ç¤º/éšè—**

```tsx
'use client'
import { useState } from 'react'

export default function Modal() {
  const [isOpen, setIsOpen] = useState(false)

  return (
    <div>
      <button onClick={() => setIsOpen(true)}>
        æ‰“å¼€å¼¹çª—
      </button>

      {isOpen && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center">
          <div className="bg-white p-6 rounded-lg">
            <h2>å¼¹çª—å†…å®¹</h2>
            <button onClick={() => setIsOpen(false)}>
              å…³é—­
            </button>
          </div>
        </div>
      )}
    </div>
  )
}
```

> **ä½ åªéœ€è¦æ‡‚**ï¼š`isOpen` æ§åˆ¶æ˜¾ç¤º/éšè—ï¼Œ`true` æ˜¾ç¤ºï¼Œ`false` éšè—ã€‚

**åœºæ™¯ 3ï¼šåˆ—è¡¨æ“ä½œ**

```tsx
'use client'
import { useState } from 'react'

export default function TodoList() {
  const [todos, setTodos] = useState<string[]>([])
  const [input, setInput] = useState('')

  const addTodo = () => {
    if (input.trim()) {
      setTodos([...todos, input])  // æ·»åŠ åˆ°åˆ—è¡¨
      setInput('')                   // æ¸…ç©ºè¾“å…¥
    }
  }

  return (
    <div className="p-4">
      <div className="flex gap-2">
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          className="border rounded px-3 py-2 flex-1"
        />
        <button onClick={addTodo} className="bg-blue-500 text-white px-4 rounded">
          æ·»åŠ 
        </button>
      </div>
      <ul className="mt-4">
        {todos.map((todo, index) => (
          <li key={index} className="py-2 border-b">{todo}</li>
        ))}
      </ul>
    </div>
  )
}
```

> **ä½ åªéœ€è¦æ‡‚**ï¼š
> 1. `todos` æ•°ç»„å­˜å‚¨åˆ—è¡¨æ•°æ®
> 2. ç‚¹å‡»"æ·»åŠ "æ—¶ï¼ŒæŠŠ `input` çš„å€¼åŠ åˆ° `todos` é‡Œ
> 3. **`[...todos, input]` è¿™ç§å±•å¼€è¯­æ³•ï¼Ÿ** â†’ AI å†™ï¼
> 4. **`<string[]>` è¿™ç§ç±»å‹æ ‡æ³¨ï¼Ÿ** â†’ AI å†™ï¼

---

## 5. å¸¸ç”¨ Hooks

### 5.1 Hooks æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿…çœ‹ï¼ï¼‰

**Hooks = ç»™ç»„ä»¶è£…å¤‡çš„"å·¥å…·åŒ…"ğŸ’**

**ç±»æ¯”**ï¼šæƒ³è±¡ä½ æ˜¯ä¸€ä¸ªæ¢é™©å®¶ğŸ‘¨â€ğŸš€

```
æ™®é€šç»„ä»¶ = ç©ºæ‰‹æ¢é™©ï¼ˆåªèƒ½èµ°è·¯ï¼‰

åŠ ä¸Š Hooks = è£…å¤‡é½å…¨çš„æ¢é™©å®¶ï¼š
â”œâ”€â”€ useState    = è®°å¿†èƒŒåŒ…ï¼ˆè®°ä½çŠ¶æ€ï¼‰
â”œâ”€â”€ useEffect   = è‡ªåŠ¨è§¦å‘å™¨ï¼ˆåˆ°è¾¾æŸåœ°è‡ªåŠ¨æ‰§è¡Œä»»åŠ¡ï¼‰
â”œâ”€â”€ useRef      = å®šä½å™¨ï¼ˆè®°ä½ä½ç½®ï¼‰
â””â”€â”€ useContext  = å¯¹è®²æœºï¼ˆè·¨ç»„ä»¶é€šä¿¡ï¼‰
```

**ä½ åªéœ€è¦è®°ä½**ï¼š
- **Hooks æ˜¯å‡½æ•°**ï¼Œåå­—éƒ½ä»¥ `use` å¼€å¤´
- **Hooks ç»™ç»„ä»¶å¢åŠ èƒ½åŠ›**ï¼ˆè®°å¿†ã€å‰¯ä½œç”¨ã€å¼•ç”¨ç­‰ï¼‰
- **å¸¸ç”¨çš„å°±ä¸¤ä¸ª**ï¼š`useState`ï¼ˆè®°å¿†ï¼‰+ `useEffect`ï¼ˆå‰¯ä½œç”¨ï¼‰

> **Vibe Coding æç¤º**ï¼šHooks çš„å…·ä½“å†™æ³•å’Œè§„åˆ™ï¼Ÿ**äº¤ç»™ AIï¼** ä½ åªè¦çŸ¥é“"æˆ‘éœ€è¦åœ¨ç»„ä»¶åŠ è½½æ—¶è·å–æ•°æ®"ï¼ŒAI ä¼šç”¨ `useEffect` å¸®ä½ å†™ã€‚

### 5.2 useEffectï¼šå‰¯ä½œç”¨å¤„ç†

**useEffect = è‡ªåŠ¨è§¦å‘å™¨â°**

**ç±»æ¯”**ï¼šæƒ³è±¡ä½ è®¾ç½®äº†ä¸€ä¸ªé—¹é’Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—¹é’Ÿè®¾ç½®                          â”‚
â”‚                                  â”‚
â”‚  [X] æ¯å¤©æ—©ä¸Š 7 ç‚¹å“              â”‚  â† useEffect(() => {}, [])
â”‚  [ ] æ¯æ¬¡æ¸©åº¦å˜åŒ–æ—¶å“              â”‚  â† useEffect(() => {}, [temp])
â”‚  [ ] ä¸€ç›´å“ï¼ˆä¸æ¨èğŸ˜±ï¼‰             â”‚  â† useEffect(() => {})
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŸºæœ¬è¯­æ³•**ï¼š

```tsx
'use client'
import { useState, useEffect } from 'react'

export default function UserProfile() {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    // ğŸ‘ˆ è¿™é‡Œçš„ä»£ç ä¼šåœ¨ç»„ä»¶åŠ è½½æ—¶æ‰§è¡Œ
    fetch('/api/user')
      .then(res => res.json())
      .then(data => {
        setUser(data)
        setLoading(false)
      })
  }, [])  // ğŸ‘ˆ ç©ºæ•°ç»„ = åªåœ¨é¦–æ¬¡åŠ è½½æ—¶æ‰§è¡Œï¼ˆé—¹é’Ÿåªå“ä¸€æ¬¡ï¼‰

  if (loading) return <div>åŠ è½½ä¸­...</div>

  return <div>æ¬¢è¿ï¼Œ{user?.name}</div>
}
```

### 5.3 useEffect ä¾èµ–æ•°ç»„è¯¦è§£ï¼ˆé‡è¦ï¼ï¼‰

**å­¦ç”Ÿæœ€å¸¸é—®çš„é—®é¢˜**ï¼š

> **Q: ä¸ºä»€ä¹ˆ `[]` ç©ºæ•°ç»„æ„å‘³ç€"åªæ‰§è¡Œä¸€æ¬¡"ï¼Ÿ**
>
> **A**: è¿™æ˜¯ React çš„è§„åˆ™ï¼ç”¨é—¹é’Ÿç†è§£ï¼š

```
useEffect(() => {
  console.log('æ‰§è¡Œäº†!')
}, [])  // ç©ºæ•°ç»„

ç­‰ä»·äºï¼š
"è®¾ç½®é—¹é’Ÿï¼Œä¸ç›‘å¬ä»»ä½•å˜åŒ–ï¼Œæ‰€ä»¥åªåœ¨é¦–æ¬¡åŠ è½½æ—¶å“ä¸€æ¬¡"
```

**ä¸‰ç§å¸¸è§æ¨¡å¼**ï¼š

| å†™æ³• | è§¦å‘æ—¶æœº | é—¹é’Ÿç±»æ¯” |
|------|---------|---------|
| `useEffect(() => {}, [])` | åªåœ¨ç»„ä»¶é¦–æ¬¡åŠ è½½æ—¶ | é—¹é’Ÿåªå“ä¸€æ¬¡ |
| `useEffect(() => {}, [userId])` | é¦–æ¬¡åŠ è½½ + æ¯æ¬¡ `userId` å˜åŒ–æ—¶ | é—¹é’Ÿç›‘å¬ `userId`ï¼Œå®ƒå˜å°±å“ |
| `useEffect(() => {})` | é¦–æ¬¡åŠ è½½ + æ¯æ¬¡ç»„ä»¶æ›´æ–°æ—¶ | é—¹é’Ÿä¸€ç›´å“ï¼ˆå±é™©âš ï¸ï¼‰ |

**ç¤ºä¾‹å¯¹æ¯”**ï¼š

```tsx
// ä¾‹å­ 1ï¼šåªåœ¨é¦–æ¬¡åŠ è½½æ—¶è·å–æ•°æ®
useEffect(() => {
  console.log('ç»„ä»¶åŠ è½½äº†ï¼Œè·å–æ•°æ®')
  fetchData()
}, [])  // ğŸ‘ˆ ç©ºæ•°ç»„ = åªæ‰§è¡Œä¸€æ¬¡

// ä¾‹å­ 2ï¼šuserId å˜åŒ–æ—¶é‡æ–°è·å–
useEffect(() => {
  console.log('userId å˜äº†:', userId)
  fetchUserData(userId)
}, [userId])  // ğŸ‘ˆ ç›‘å¬ userId å˜åŒ–

// ä¾‹å­ 3ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
useEffect(() => {
  console.log('ç»„ä»¶æ›´æ–°äº†')
})  // ğŸ‘ˆ æ²¡æœ‰æ•°ç»„ = ä¸€ç›´æ‰§è¡Œ
```

> **Vibe Coding æç¤º**ï¼š
> - æƒ³åœ¨ç»„ä»¶åŠ è½½æ—¶åšäº‹ï¼Ÿâ†’ `useEffect(() => { ... }, [])`
> - æƒ³åœ¨æŸä¸ªå€¼å˜åŒ–æ—¶åšäº‹ï¼Ÿâ†’ `useEffect(() => { ... }, [é‚£ä¸ªå€¼])`
> - **å…·ä½“çš„ä¾èµ–æ•°ç»„è§„åˆ™ï¼Ÿ** â†’ åˆ«ç®¡ï¼è®© AI å¸®ä½ å†™ï¼
> - **é—¹é’Ÿå“äº†è¦å…³æ‰ï¼ˆæ¸…ç†å‡½æ•°ï¼‰ï¼Ÿ** â†’ AI ä¼šåŠ  `return () => { ... }`ï¼Œä½ ä¸ç”¨ç®¡ï¼

### 5.4 å¸¸è§ useEffect æ¨¡å¼ï¼ˆè®© AI å†™ï¼ï¼‰

```tsx
// 1. åªåœ¨é¦–æ¬¡åŠ è½½æ—¶æ‰§è¡Œ
useEffect(() => {
  console.log('ç»„ä»¶åŠ è½½äº†')
}, [])

// 2. ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ
useEffect(() => {
  console.log('userId å˜åŒ–äº†:', userId)
}, [userId])

// 3. æ¸…ç†å‡½æ•°ï¼ˆç»„ä»¶å¸è½½æ—¶æ‰§è¡Œï¼‰
useEffect(() => {
  const timer = setInterval(() => {
    console.log('å®šæ—¶å™¨è¿è¡Œä¸­')
  }, 1000)

  return () => clearInterval(timer)  // ğŸ‘ˆ æ¸…ç†å®šæ—¶å™¨ï¼ˆAI ä¼šå¸®ä½ å†™ï¼‰
}, [])
```

---

## 6. å®¢æˆ·ç«¯ vs æœåŠ¡ç«¯ç»„ä»¶

### Next.js çš„ä¸¤ç§ç»„ä»¶

| ç±»å‹ | ç‰¹ç‚¹ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| æœåŠ¡ç«¯ç»„ä»¶ï¼ˆé»˜è®¤ï¼‰ | åœ¨æœåŠ¡å™¨æ¸²æŸ“ï¼Œæ›´å¿« | é™æ€å†…å®¹ã€æ•°æ®è·å– |
| å®¢æˆ·ç«¯ç»„ä»¶ | åœ¨æµè§ˆå™¨æ¸²æŸ“ | äº¤äº’ã€useStateã€äº‹ä»¶ |

### ä»€ä¹ˆæ—¶å€™ç”¨ 'use client'ï¼Ÿ

éœ€è¦åŠ  `'use client'` çš„æƒ…å†µï¼š
- ä½¿ç”¨ `useState`ã€`useEffect` ç­‰ Hooks
- ä½¿ç”¨ `onClick`ã€`onChange` ç­‰äº‹ä»¶
- ä½¿ç”¨æµè§ˆå™¨ APIï¼ˆå¦‚ `window`ã€`localStorage`ï¼‰

```tsx
'use client'  // ğŸ‘ˆ åªæœ‰éœ€è¦äº¤äº’æ—¶æ‰åŠ 

import { useState } from 'react'

export default function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

---

## 7. Vibe Coding æŠ€å·§

### è®© AI ç”Ÿæˆç»„ä»¶

**å¥½çš„ Prompt**ï¼š

```
å¸®æˆ‘åˆ›å»ºä¸€ä¸ª React ç»„ä»¶ï¼š
- åç§°ï¼šProductCard
- Propsï¼štitle, price, image, onAddToCart
- ä½¿ç”¨ Tailwind CSS
- åŒ…å«ï¼šå›¾ç‰‡ã€æ ‡é¢˜ã€ä»·æ ¼ã€æ·»åŠ è´­ç‰©è½¦æŒ‰é’®
- ç‚¹å‡»æŒ‰é’®è°ƒç”¨ onAddToCart
```

### å¸¸è§é—®é¢˜æ€ä¹ˆé—®

```
# Props é—®é¢˜
"æ€ä¹ˆç»™ç»„ä»¶ä¼ é€’ç‚¹å‡»äº‹ä»¶ï¼Ÿ"
"æ€ä¹ˆè®¾ç½®é»˜è®¤å€¼ï¼Ÿ"

# State é—®é¢˜
"æ€ä¹ˆåœ¨ç‚¹å‡»åæ›´æ–°é¡µé¢å†…å®¹ï¼Ÿ"
"æ€ä¹ˆå®ç°æ˜¾ç¤º/éšè—åŠŸèƒ½ï¼Ÿ"

# æ¸²æŸ“é—®é¢˜
"ä¸ºä»€ä¹ˆæˆ‘çš„åˆ—è¡¨ä¸æ˜¾ç¤ºï¼Ÿ"
"æ€ä¹ˆéå†æ•°ç»„æ˜¾ç¤ºå¤šä¸ªç»„ä»¶ï¼Ÿ"
```

---

## ğŸ“ å°ç»“

| æ¦‚å¿µ | è¯´æ˜ | ä¾‹å­ |
|------|------|------|
| ç»„ä»¶ | å¯å¤ç”¨çš„ UI ç§¯æœ¨ | `<Button />` |
| Props | å¤–éƒ¨ä¼ å…¥çš„æ•°æ® | `<Button text="æäº¤" />` |
| State | å†…éƒ¨ç®¡ç†çš„çŠ¶æ€ | `useState(0)` |
| useEffect | å‰¯ä½œç”¨å¤„ç† | åŠ è½½æ•°æ® |

**æ ¸å¿ƒç†è§£**ï¼š
1. ç»„ä»¶è®©ä»£ç å¯å¤ç”¨ã€å¯ç»´æŠ¤
2. Props æ˜¯"ä»å¤–åˆ°å†…"ä¼ æ•°æ®
3. State æ˜¯"ç»„ä»¶å†…éƒ¨"çš„è®°å¿†
4. éœ€è¦äº¤äº’çš„ç»„ä»¶åŠ  `'use client'`

---

## ğŸ“š æœ¬ç« å®Œæˆ

æ­å–œä½ å®Œæˆäº†å‰ç«¯å¼€å‘åŸºç¡€çš„å­¦ä¹ ï¼

**å›é¡¾**ï¼š
- [å‰ç«¯æ¦‚è¿°](./å‰ç«¯æ¦‚è¿°.md) - HTML/CSS/JS ä¸‰ä»¶å¥—
- [Next.js å…¥é—¨](./nextjså…¥é—¨.md) - é¡¹ç›®åˆ›å»ºä¸è·¯ç”±
- [Tailwind å…¥é—¨](./tailwindå…¥é—¨.md) - å¿«é€Ÿå†™æ ·å¼
- [React ç»„ä»¶](./reactç»„ä»¶.md) - ç»„ä»¶åŒ–å¼€å‘

**ä¸‹ä¸€æ­¥**ï¼š
ğŸ‘‰ [åç«¯å¼€å‘åŸºç¡€](./åç«¯.md)

å­¦ä¹ å¦‚ä½•ç”¨ FastAPI åˆ›å»ºåç«¯ APIã€‚
