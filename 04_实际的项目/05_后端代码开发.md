# 后端代码开发实战

让 Claude Code 帮你写后端，不是一句"帮我写个后端"就完事了。得有节奏、有步骤，一步步来才不会乱。

---

## 技术栈

先跟 Claude 说清楚你用啥：

- **后端框架：** FastAPI
- **数据库：** PostgreSQL + SQLAlchemy
- **基础设施：** Supabase（数据库 + 文件存储 + 用户认证）

---

## 开发流程

### 第一阶段：打地基

**1. 把需求文档甩给 Claude**

```
@需求文档.md 这是我的需求文档，技术栈是 FastAPI + PostgreSQL + Supabase，帮我理解一下要做哪些功能
```

让它先理解你要做啥，别急着写代码。

**2. 配置 Supabase 连接**

跟 Claude 说：

```
帮我配置 Supabase 的数据库连接，我需要：
- 数据库连接（PostgreSQL）
- 文件存储（Storage）
- 用户认证（Auth）
把需要的 key 都配置好
```

这步搞定，后面才能跑得动。

**3. 跑通文件上传**

```
帮我写一个文件上传的接口，上传到 Supabase Storage，测试一下能不能跑通
```

先验证基础设施没问题。

---

### 第二阶段：跑通核心链路

**4. 测试 LLM 调用**

```
帮我写一个测试接口，调用大模型 API，验证连接是否正常
```

能调通大模型，后面的 AI 功能才有戏。

**5. 写一个最小 MVP**

```
帮我写一个最简单的 demo：用户输入提示词 → 调用 LLM → 生成 HTML + GSAP 动画 → 返回结果
```

这步很关键——先跑通最核心的链路，证明技术路线可行。

---

### 第三阶段：正式开发

**6. 让 Claude 设计 API 结构**

```
根据需求文档，帮我设计后端的 API 接口结构，列出每个模块需要哪些接口
```

先规划，再动手。

**7. 一个模块一个模块写**

别一口气让它写完所有代码。按模块来：

```
先帮我写用户模块：注册、登录、获取用户信息
```

```
用户模块写完了，接下来写动画生成模块
```

**8. 每个模块写完立刻测试**

```
帮我写几个测试用例，验证用户注册登录功能是否正常
```

写一个测一个，别攒着。

---

### 第四阶段：联调验收

**9. 模拟完整用户流程**

```
模拟一个用户的完整流程：注册账号 → 登录 → 创建动画 → 查看结果，帮我走一遍看看有没有问题
```

**10. 发现问题就贴给 Claude**

```
这个接口报错了：[贴报错信息]，帮我看看怎么回事
```

**11. 循环修 bug 直到顺畅**

重复第 9-10 步，直到整个流程跑通没毛病。

---

## 小贴士

| 场景 | 怎么跟 Claude 说 |
|------|------------------|
| 代码报错 | "这段代码报错了：[报错信息]，帮我修" |
| 功能不对 | "这个接口返回的数据格式不对，应该是 xxx" |
| 想加功能 | "在用户模块加一个修改密码的接口" |
| 想优化 | "这个查询太慢了，帮我优化一下" |

---

## 核心原则

1. **先跑通再完善** — MVP 能跑了再加功能
2. **一个模块一个模块来** — 别贪多，稳扎稳打
3. **写完就测** — 别攒一堆再测，到时候 bug 连环爆
4. **有问题就问** — Claude 不怕你问多，就怕你不说清楚